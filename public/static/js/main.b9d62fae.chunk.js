(this.webpackJsonpdiplom=this.webpackJsonpdiplom||[]).push([[0],{117:function(e,t,a){"use strict";a.r(t);var n=a(78);t.default=Object(n.c)(["userReducer","appReducer"].reduce((function(e,t){return e[t]=a(553)("./".concat(t)).default,e}),{}))},250:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a(72),l={isReady:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;return a===r.a?Object(n.a)({},e,{isReady:c}):e}},251:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a(72),l={user:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;switch(a){case r.b:return Object(n.a)({},e,{user:c});default:return e}}},287:function(e,t,a){e.exports=a(554)},292:function(e,t,a){},296:function(e,t,a){},297:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},492:function(e,t,a){},501:function(e,t,a){},540:function(e,t,a){},548:function(e,t,a){},553:function(e,t,a){var n={"./":117,"./appReducer":250,"./appReducer.js":250,"./index":117,"./index.js":117,"./userReducer":251,"./userReducer.js":251};function r(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=l,e.exports=r,r.id=553},554:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),o=(a(292),a(93)),i=a(80),s=a(40),u=a.n(s),m=a(73),d=a(50),p=a(564),f=a(570),h=a(14),E=a(579),v=a(580),g=a(1),y=a.n(g),b=(a(296),function(e){var t=e.children,a=e.className;return r.a.createElement("div",{className:y()("block",a)},t)}),k=a(52),w=(a(297),function(e){return r.a.createElement(k.a,Object.assign({},e,{className:y()("button",e.className,{"button--large":"large"===e.size})}))}),S=function(e,t,a){return t[e]?a[e]?"error":"success":""},C=a(555),_=(a(314),function(e){var t=e.url,a=e.letter,n=e.name;if(t)return r.a.createElement(C.a,{className:"avatar",src:t});var l=function(e){var t=e.charCodeAt();return t>=1048&&t<=1055?{background:"#F5D6D9",color:"#F38181"}:t>=1049&&t<=1063?{background:"#F8ECD5",color:"#F1A32F"}:t>=1064&&t<=1071?{background:"#DAD5F8",color:"#816CFF"}:{background:"#E9F5FF",color:"#2A86FF"}}(n||a);return r.a.createElement("div",{className:"avatar",style:{backgroundColor:"".concat(l.background)}},r.a.createElement("div",{className:"avatar__letter",style:{color:l.color}},a))}),I=a(575),O=a(576),x=a(577),j=a(578),N=(a(315),a(23)),F=a(46),T=a.n(F);T.a.defaults.baseURL="http://ing-crm.ru/",T.a.defaults.withCredentials=!0;var D=T.a;D.defaults.withCredentials=!0;var A=function(e){return z().then((function(t){return D.post("/register",Object(N.a)({},e,{remember:"on"}))}))},R=function(e){return z().then((function(t){return D.post("/login",Object(N.a)({},e,{remember:"on"}))}))},V=function(){return z().then((function(e){return D.get("/api/user")}))},B=function(){z().then((function(e){D.post("/logout").then((function(e){window.location.reload()})).catch((function(e){console.log(e.response)}))}))};function z(){return D.defaults.withCredentials=!0,D.get("/sanctum/csrf-cookie")}var P,L=D.CancelToken;function M(){return D.defaults.withCredentials=!0,D.get("/sanctum/csrf-cookie")}var U,W={save:function(e){return null!==e.id&&""!==e.id?D.put("/api/clients/".concat(e.id),e):D.post("/api/clients",e)},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return M().then((function(t){return D.get("/api/clients",{params:e,cancelToken:new L((function(e){P=e}))})}))},getList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return D.get("/api/clients/list",e)},show:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/api/clients/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),delete:function(e){return D.delete("/api/clients/".concat(e))},cancel:function(){P()}},X=D.CancelToken,H={save:function(e){var t=new FormData;return t.append("name",e.name),t.append("price",e.price),null!==e.image&&t.append("img",e.image),e.id?(t.append("_method","PATCH"),D.post("/api/foods/".concat(e.id),t)):D.post("/api/foods",t)},cancel:function(){U()},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return D.get("/api/foods",{params:e,cancelToken:new X((function(e){U=e}))})},getList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return D.get("/api/foods/list",e)},show:function(e){return D.get("/api/foods/".concat(e))},delete:function(e){return D.delete("/api/foods/".concat(e))}};function Z(){return D.defaults.withCredentials=!0,D.get("/sanctum/csrf-cookie")}var J={save:function(e){return Z().then((function(t){return D.post("/api/orders",e)}))},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Z().then((function(t){return D.get("/api/orders",{params:e})}))},show:function(e){return Z().then((function(t){return D.get("/api/orders/".concat(e))}))},setStatus:function(e,t){return Z().then((function(a){return D.put("/api/orders/".concat(e),{status:t})}))},delete:function(e){return Z().then((function(t){return D.delete("/api/orders/".concat(e))}))},getStatistic:function(e,t){return Z().then((function(a){return D.get("/api/stats",{params:Object(N.a)({},e,{type:t})})}))}},G=function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement(h.b,{to:"/",className:"/"===window.location.pathname?"active":""},r.a.createElement(I.a,null),r.a.createElement("span",null," \u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement(h.b,{to:"/clients",className:window.location.pathname.includes("clients")?"active":""},r.a.createElement(O.a,null),r.a.createElement("span",null," \u041a\u043b\u0438\u0435\u043d\u0442\u044b")),r.a.createElement(h.b,{to:"/foods",className:window.location.pathname.includes("foods")?"active":""},r.a.createElement(x.a,null),r.a.createElement("span",null," \u0410\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442")),r.a.createElement(h.b,{to:"/#",onClick:function(e){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0441\u0430\u0439\u0442 ?")&&B()}},r.a.createElement(j.a,null),r.a.createElement("span",null," \u0412\u044b\u0439\u0442\u0438")))},K=a(10),$=a(556),q=function(e){var t=e.item,a=e.callback,n=r.a.useState([]),l=Object(K.a)(n,2),c=l[0],o=l[1],i=r.a.useState(null),s=Object(K.a)(i,2),u=s[0],m=s[1],d=r.a.useState(""),f=Object(K.a)(d,2),h=f[0],E=f[1];r.a.useEffect((function(){t&&(E(t.address),v(t.address))}),[t]);var v=function(e){u&&clearTimeout(u);var t=setTimeout((function(){o([]);T.a.defaults.withCredentials=!1,T.a.get("https://websites.platform.taximaster.ru/v2/find_address?needle="+e,{headers:{"Sec-Fetch-Dest":"empty","Sec-Fetch-Mod":"cors","Sec-Fetch-Site":"same-origin","X-Site-VtmId":"134","X-Site-VtmGroupId":"56",Accept:"*/*"}}).then((function(e){var t=[];e.data.map((function(e,a){a<=9&&t.push(e)})),o(t)})).catch((function(e){console.log(e.response)})).finally((function(){}))}),500);m(t)};return r.a.createElement("div",null,r.a.createElement(p.a.Item,{validateStatus:0!==c.length?"success":"error",help:0!==c.length?"":"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0439\u0442\u0438 \u0442\u0430\u043a\u043e\u0439 \u0430\u0434\u0440\u0435\u0441",hasFeedback:!0},r.a.createElement($.a,{value:h,style:{width:"100%"},onChange:function(e){return E(e)},onSearch:function(e){E(e),""!==e&&v(e)},options:c,onSelect:function(e){var t=c.find((function(t){return t.value===e}));a(t)}})))},Y=function(e){var t=e.values,a=e.touched,n=e.errors,l=e.handleChange,c=e.handleBlur,o=e.handleSubmit,i=e.isValid,s=e.isSubmitting;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("p",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(b,null,r.a.createElement(p.a,{onSubmit:o,className:"login-form"},r.a.createElement(p.a.Item,{validateStatus:S("email",a,n),help:a.email?n.email:"",hasFeedback:!0},r.a.createElement(f.a,{id:"email",prefix:r.a.createElement(E.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),size:"large",placeholder:"E-Mail",value:t.email,onChange:l,onBlur:c})),r.a.createElement(p.a.Item,{validateStatus:S("password",a,n),help:a.password?n.password:"",hasFeedback:!0},r.a.createElement(f.a,{id:"password",prefix:r.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),size:"large",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:t.password,onChange:l,onBlur:c})),r.a.createElement(p.a.Item,null,s&&!i&&r.a.createElement("span",null,"\u041e\u0448\u0438\u0431\u043a\u0430!"),r.a.createElement(w,{disabled:s,onClick:o,type:"primary",size:"large"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(h.b,{className:"auth__register-link",to:"/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))},Q=function(e){var t=e.isAuth,a=e.values,n=e.errors,r={email:function(e){e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(n.email="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 E-Mail"):n.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-Mail"},password:function(e){e?t||/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/.test(e)||(n.password="\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043b\u0451\u0433\u043a\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"):n.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},password_confirmation:function(e){e||(n.password_confirmation="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e"),t&&e===a.password||(n.password_confirmation="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")},name:function(e){t&&e||(n.name="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044e")},phone:function(e){t&&e||(n.phone="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")}};Object.keys(a).forEach((function(e){return r[e]&&r[e](a[e])}))},ee=Object(d.b)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return Q({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,r=a.setErrors,a.props,e.next=3,R(t).catch((function(e){if(void 0!==e.response){var t={};Object.keys(e.response.data.errors).forEach((function(a){t[a]=e.response.data.errors[a][0]})),r(t)}})).then((function(e){V().then((function(e){window.location.replace("/")})),n(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),displayName:"LoginForm"})(Y),te=function(e){var t=e.values,a=e.touched,n=e.errors,l=e.handleChange,c=e.handleBlur,o=e.handleSubmit,i=e.isValid,s=e.isSubmitting;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement("p",{style:{fontSize:14}},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e")),r.a.createElement(b,null,r.a.createElement(p.a,{onSubmit:o,className:"login-form"},r.a.createElement(p.a.Item,{validateStatus:S("email",a,n),help:a.email?n.email:"",hasFeedback:!0},r.a.createElement(f.a,{id:"email",prefix:r.a.createElement(E.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),size:"large",placeholder:"E-Mail",value:t.email,onChange:l,onBlur:c})),r.a.createElement(p.a.Item,{validateStatus:S("name",a,n),help:a.name?n.name:"",hasFeedback:!0},r.a.createElement(f.a,{id:"name",prefix:r.a.createElement(O.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),size:"large",placeholder:"\u0418\u043c\u044f",value:t.name,onChange:l,onBlur:c})),r.a.createElement(p.a.Item,{validateStatus:S("password",a,n),help:a.password?n.password:"",hasFeedback:!0},r.a.createElement(f.a,{id:"password",prefix:r.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),size:"large",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:t.password,onChange:l,onBlur:c})),r.a.createElement(p.a.Item,{validateStatus:S("password_confirmation",a,n),help:a.password_confirmation?n.password_confirmation:"",hasFeedback:!0},r.a.createElement(f.a,{id:"password_confirmation",prefix:r.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),size:"large",type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:t.password_confirmation,onChange:l,onBlur:c})),r.a.createElement(p.a.Item,null,s&&!i&&r.a.createElement("span",null,"\u041e\u0448\u0438\u0431\u043a\u0430!"),r.a.createElement(w,{disabled:s,onClick:o,type:"primary",size:"large"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(h.b,{className:"auth__register-link",to:"/login"},"\u0423 \u043c\u0435\u043d\u044f \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"))))},ae=Object(d.b)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",password:"",name:"",password_confirmation:""}},validate:function(e){var t={};return Q({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.setErrors;t.props;A(e).then((function(e){V().then((function(e){window.location.replace("/")}))})).catch((function(e){if(void 0!==e.response){var t={};Object.keys(e.response.data.errors).forEach((function(a){t[a]=e.response.data.errors[a][0]})),n(t)}a(!1)}))},displayName:"RegisterForm"})(te),ne=(a(446),function(){return r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},r.a.createElement(i.b,{exact:!0,path:"/login",component:ee}),r.a.createElement(i.b,{exact:!0,path:"/signup",component:ae})))}),re=a(559),le=a(199),ce=a(572),oe=a(565),ie=a(198),se=a(557),ue=a(561),me=a(566),de=a(574),pe=a(109),fe=(a(447),{0:{text:"\u041d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",color:"red"},1:{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",color:"green"},2:{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",color:"green"}}),he=Array(5).fill(0).map((function(e,t){return{name:"",letter:"",id:t,loading:!0,status:0}})),Ee=function(e){var t=r.a.useState([{key:"",data:he}]),a=Object(K.a)(t,2),n=a[0],l=a[1],c=r.a.useState((new Date).toJSON().split("T")[0]),o=Object(K.a)(c,2),i=o[0],s=o[1];return r.a.useEffect((function(){J.get({date_from:i}).then((function(e){l(e.data)})).catch((function(e){}))}),[i]),r.a.createElement("div",{className:"site-content"},r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,"\u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement("div",{className:"site-layout-content"},r.a.createElement("div",{className:"orders"},r.a.createElement(ie.a,{placeholder:"\u0417\u0430\u043a\u0430\u0437\u044b \u043e\u0442",onChange:function(e,t){return s(t)}}),r.a.createElement(k.a,{onClick:function(){return e.history.push("/orders/create")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),n.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(se.a,null,t.key),t.data.map((function(t){return r.a.createElement(ue.a.Item,{className:"cursor-pointer",onClick:function(){return e.history.push("/orders/"+t.id)},key:t.id},r.a.createElement(me.a,{avatar:!0,title:!1,loading:t.loading,active:!0},r.a.createElement(ue.a.Item.Meta,{avatar:r.a.createElement(_,{letter:t.letter,name:t.name}),title:r.a.createElement(h.b,{to:"/orders/".concat(t.id)},t.name),description:r.a.createElement(de.a,{color:fe[t.status].color,text:fe[t.status].text})})))})))})),0===n.length&&r.a.createElement(pe.a,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:r.a.createElement("span",null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445")},r.a.createElement(k.a,{onClick:function(){return e.history.push("/orders/create")},type:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))},ve=a(197),ge=ve.a.TabPane,ye=function(e){var t=r.a.useState([]),a=Object(K.a)(t,2),n=a[0],l=a[1],c=r.a.useState("foods"),o=Object(K.a)(c,2),i=o[0],s=o[1];return r.a.useEffect((function(e){J.getStatistic({},i).then((function(e){l(e.data)}))}),[i]),r.a.createElement("div",{className:"site-content"},r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/"},"\u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement(oe.a.Item,null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")),r.a.createElement("div",{className:"site-layout-content"},r.a.createElement(ve.a,{defaultActiveKey:"1"},r.a.createElement(ge,{tab:r.a.createElement("span",{onClick:function(){return s("foods")}},r.a.createElement(x.a,null),"\u0410\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442"),key:"1"},n.map((function(e,t){return r.a.createElement(ue.a.Item,{className:"cursor-pointer",key:t},r.a.createElement(me.a,{avatar:!0,title:!1,loading:e.loading,active:!0},r.a.createElement(ue.a.Item.Meta,{avatar:r.a.createElement(_,{letter:e.letter,name:e.name}),title:r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(h.b,{to:"/orders/".concat(e.id)},e.name)),description:"\u041f\u0440\u043e\u0434\u0430\u043d\u043e: "+e.count})))}))),r.a.createElement(ge,{tab:r.a.createElement("span",{onClick:function(){return s("clients")}},r.a.createElement(O.a,null),"\u041a\u043b\u0438\u0435\u043d\u0442\u044b"),key:"2"},n.map((function(e,t){return r.a.createElement(ue.a.Item,{key:t},r.a.createElement(me.a,{avatar:!0,title:!1,loading:e.loading,active:!0},r.a.createElement(ue.a.Item.Meta,{avatar:r.a.createElement(_,{letter:e.letter,name:e.name}),title:r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(h.b,{to:"/orders/".concat(e.id)},e.name),r.a.createElement(de.a,{color:"#83e246",text:e.total+"\u0420"})),description:"\u0417\u0430\u043a\u0430\u0437\u043e\u0432: "+e.count})))}))))))},be=(a(492),Array(5).fill(0).map((function(e,t){return{name:"",letter:"",id:t,loading:!0}}))),ke=function(e){var t=r.a.useState([{key:"",data:be}]),a=Object(K.a)(t,2),n=a[0],l=a[1];r.a.useEffect((function(){return W.get().then((function(e){l(e.data.data)})).catch((function(e){})),function(){W.cancel()}}),[]);return r.a.createElement("div",{className:"site-content"},r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,"\u041a\u043b\u0438\u0435\u043d\u0442\u044b")),r.a.createElement("div",{className:"site-layout-content"},r.a.createElement("div",{className:"clients"},r.a.createElement("div",null,r.a.createElement(k.a,{onClick:function(){return e.history.push("/clients/create")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))),n.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(se.a,{orientation:"left"},t.key),t.data.map((function(t){return r.a.createElement(ue.a.Item,{className:"cursor-pointer",key:t.id,onClick:function(){return e.history.push("/clients/".concat(t.id))},actions:[r.a.createElement(h.b,{onClick:function(e){return e.stopPropagation()},to:"/clients/".concat(t.id,"/edit"),key:"list-loadmore-edit"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")]},r.a.createElement(me.a,{avatar:!0,title:!1,loading:t.loading,active:!0},r.a.createElement(ue.a.Item.Meta,{avatar:r.a.createElement(_,{letter:t.letter,name:t.name}),title:r.a.createElement(h.b,{to:"/clients/".concat(t.id)},t.name),description:""})))})))})),0===n.length&&r.a.createElement(pe.a,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:r.a.createElement("span",null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445")},r.a.createElement(k.a,{onClick:function(){return e.history.push("/clients/create")},type:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))},we=a(568),Se=a(562),Ce=a(581),_e=a(582),Ie=a(583),Oe=we.a.Meta,xe=Se.a.confirm,je=function(e){var t=r.a.useState({name:""}),a=Object(K.a)(t,2),n=a[0],l=a[1],c=r.a.useState(!1),o=Object(K.a)(c,2),i=o[0],s=o[1];return r.a.useEffect((function(){s(!0),W.show(e.match.params.id).then((function(t){null===t.data.client&&e.history.push("/404"),l(t.data.client)})).catch((function(t){console.log(t),e.history.push("/404")})).finally((function(){s(!1)}))}),[e.match.params.id]),r.a.createElement("div",null,r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/clients"},"\u041a\u043b\u0438\u0435\u043d\u0442\u044b")),r.a.createElement(oe.a.Item,null,n.name)),r.a.createElement(we.a,{style:{width:"100%",marginTop:16},actions:[r.a.createElement(_e.a,{key:"edit",onClick:function(){return e.history.push("/clients/".concat(e.match.params.id,"/edit"),{client:n})}}),r.a.createElement(Ie.a,{onClick:function(){return t=e.match.params.id,void xe({title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",icon:r.a.createElement(Ce.a,null),content:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430?",okText:"\u0414\u0430",okType:"danger",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onOk:function(){W.delete(t).then((function(t){e.history.replace("/clients")}))},onCancel:function(){}});var t},key:"delete"})]},r.a.createElement(me.a,{loading:i,avatar:!0,active:!0},r.a.createElement(Oe,{avatar:r.a.createElement(_,{letter:(null===n||void 0===n?void 0:n.letter)||"",name:n.name||""}),title:n.name}))))},Ne=a(567),Fe=a(584),Te=a(585),De=function(e){var t={},a={name:function(e){e||(t.name="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044e")},phone:function(e){e||(t.phone="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")}};return Object.keys(e).forEach((function(t){return a[t]&&a[t](e[t])})),t},Ae=function(e){var t=Object(d.a)({initialValues:{name:"",phone:"",address:"",id:""},validate:De,onSubmit:function(t){W.save(t).then((function(t){var a;a="success",Ne.a[a]({message:"\u041a\u043b\u0438\u0435\u043d\u0442",description:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),e.history.push("/clients/".concat(t.data.client.id))}))}});return r.a.useEffect((function(){void 0!==e.location.state?t.setValues(e.location.state.client):e.match.params.hasOwnProperty("id")&&W.show(e.match.params.id).then((function(e){t.setValues(e.data.client)}))}),[e.location.state,e.match.params]),r.a.createElement("div",null,r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/clients"},"\u041a\u043b\u0438\u0435\u043d\u0442\u044b")),""!==t.values.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/clients/"+t.values.id},t.values.name)),r.a.createElement(oe.a.Item,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")):r.a.createElement(oe.a.Item,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")),r.a.createElement(b,null,t.values&&r.a.createElement(p.a,{onSubmit:t.handleSubmit,className:"client-form"},r.a.createElement(p.a.Item,{validateStatus:S("name",t.touched,t.errors),help:t.touched.name?t.errors.name:"",hasFeedback:!0},r.a.createElement(f.a,{id:"name",prefix:r.a.createElement(O.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),size:"medium",placeholder:"\u0418\u043c\u044f",value:t.values.name,onChange:t.handleChange,onBlur:t.handleBlur})),r.a.createElement(p.a.Item,{validateStatus:S("phone",t.touched,t.errors),help:t.touched.phone?t.errors.phone:"",hasFeedback:!0},r.a.createElement(f.a,{id:"phone",prefix:r.a.createElement(Fe.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),size:"medium",placeholder:"+7(999)999-99-99",value:t.values.phone,onChange:t.handleChange,onBlur:t.handleBlur})),r.a.createElement(p.a.Item,{validateStatus:S("address",t.touched,t.errors),help:t.touched.address?t.errors.address:"",hasFeedback:!0},r.a.createElement(f.a,{id:"address",prefix:r.a.createElement(Te.a,{type:"home",style:{color:"rgba(0,0,0,.25)"}}),size:"medium",placeholder:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",value:t.values.address,onChange:t.handleChange,onBlur:t.handleBlur})),r.a.createElement(p.a.Item,null,t.isSubmitting&&!t.isValid&&r.a.createElement("span",null,"\u041e\u0448\u0438\u0431\u043a\u0430!"),r.a.createElement(w,{disabled:t.isSubmitting,onClick:t.handleSubmit,type:"primary",size:"medium"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))},Re=(a(501),Array(5).fill(0).map((function(e,t){return{name:"",letter:"",id:t,loading:!0}}))),Ve=function(e){var t=r.a.useState([{key:"",data:Re}]),a=Object(K.a)(t,2),n=a[0],l=a[1];return r.a.useEffect((function(){return H.get().then((function(e){l(e.data.data)})).catch((function(e){})),function(){H.cancel()}}),[]),r.a.createElement("div",{className:"site-content"},r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,"\u0410\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442")),r.a.createElement("div",{className:"site-layout-content"},r.a.createElement("div",{className:"foods"},r.a.createElement("div",null,r.a.createElement(k.a,{onClick:function(){return e.history.push("/foods/create")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))),n.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(se.a,{orientation:"left"},t.key),t.data.map((function(t){return r.a.createElement(ue.a.Item,{className:"cursor-pointer",key:t.id,onClick:function(){return e.history.push("/foods/".concat(t.id))},actions:[r.a.createElement(h.b,{onClick:function(e){return e.stopPropagation()},to:"/foods/".concat(t.id,"/edit"),key:"list-loadmore-edit"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")]},r.a.createElement(me.a,{avatar:!0,title:!1,loading:t.loading,active:!0},r.a.createElement(ue.a.Item.Meta,{avatar:r.a.createElement(_,{url:t.img,letter:t.letter,name:t.name}),title:r.a.createElement(h.b,{to:"/foods/".concat(t.id)},t.name),description:""})))})))})),0===n.length&&r.a.createElement(pe.a,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:r.a.createElement("span",null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445")},r.a.createElement(k.a,{onClick:function(){return e.history.push("/foods/create")},type:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))},Be=we.a.Meta,ze=Se.a.confirm,Pe=function(e){var t=r.a.useState({name:""}),a=Object(K.a)(t,2),n=a[0],l=a[1],c=r.a.useState(!1),o=Object(K.a)(c,2),i=o[0],s=o[1];return r.a.useEffect((function(){s(!0),H.show(e.match.params.id).then((function(t){null===t.data.food&&e.history.push("/404"),l(t.data.food)})).catch((function(t){console.log(t),e.history.push("/404")})).finally((function(){s(!1)}))}),[e.match.params.id]),r.a.createElement("div",null,r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/foods"},"\u0410\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442")),r.a.createElement(oe.a.Item,null,n.name)),r.a.createElement(we.a,{style:{width:"100%",marginTop:16},actions:[r.a.createElement(_e.a,{key:"edit",onClick:function(){return e.history.push("/foods/".concat(e.match.params.id,"/edit"),{food:n})}}),r.a.createElement(Ie.a,{onClick:function(){return t=e.match.params.id,void ze({title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",icon:r.a.createElement(Ce.a,null),content:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430?",okText:"\u0414\u0430",okType:"danger",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onOk:function(){H.delete(t).then((function(t){e.history.replace("/foods")}))},onCancel:function(){}});var t},key:"delete"})]},r.a.createElement(me.a,{loading:i,avatar:!0,active:!0},r.a.createElement(Be,{avatar:r.a.createElement(_,{url:n.image,letter:(null===n||void 0===n?void 0:n.letter)||"",name:n.name||""}),title:n.name}))))},Le=a(560),Me=a(586),Ue=a(587),We=a(588),Xe=function(e){var t={},a={name:function(e){e||(t.name="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")},price:function(e){e||(t.price="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0446\u0435\u043d\u0443")}};return Object.keys(e).forEach((function(t){return a[t]&&a[t](e[t])})),t},He=function(e){var t=r.a.useState(null),a=Object(K.a)(t,2),n=a[0],l=a[1],c=Object(d.a)({initialValues:{name:"",price:"",id:""},validate:Xe,onSubmit:function(t){H.save(Object(N.a)({},t,{image:n})).then((function(t){var a;a="success",Ne.a[a]({message:"\u041a\u043b\u0438\u0435\u043d\u0442",description:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),e.history.push("/foods/".concat(t.data.food.id))}))}});r.a.useEffect((function(){void 0!==e.location.state?c.setValues(e.location.state.food):e.match.params.hasOwnProperty("id")&&H.show(e.match.params.id).then((function(e){c.setValues(e.data.food)}))}),[e.location.state,e.match.params]);var o={beforeUpload:function(e){return l(e),!1},action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:function(e){e.file,e.fileList},defaultFileList:[],showUploadList:{}};return r.a.createElement("div",null,r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/foods"},"\u0410\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442")),""!==c.values.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/foods/"+c.values.id},c.values.name)),r.a.createElement(oe.a.Item,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")):r.a.createElement(oe.a.Item,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")),r.a.createElement(b,null,c.values&&r.a.createElement(p.a,{onSubmit:c.handleSubmit,className:"food-form"},r.a.createElement(p.a.Item,{validateStatus:S("name",c.touched,c.errors),help:c.touched.name?c.errors.name:"",hasFeedback:!0},r.a.createElement(f.a,{id:"name",prefix:r.a.createElement(Me.a,{type:"book",style:{color:"rgba(0,0,0,.25)"}}),size:"medium",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:c.values.name,onChange:c.handleChange,onBlur:c.handleBlur})),r.a.createElement(p.a.Item,{validateStatus:S("price",c.touched,c.errors),help:c.touched.price?c.errors.price:"",hasFeedback:!0},r.a.createElement(f.a,{id:"price",type:"number",prefix:r.a.createElement(Ue.a,{type:"price",style:{color:"rgba(0,0,0,.25)"}}),size:"medium",placeholder:"\u0426\u0435\u043d\u0430",value:c.values.price,onChange:c.handleChange,onBlur:c.handleBlur})),r.a.createElement(Le.a,o,r.a.createElement(w,{style:{marginBottom:10}},r.a.createElement(We.a,null)," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c")),r.a.createElement(p.a.Item,null,c.isSubmitting&&!c.isValid&&r.a.createElement("span",null,"\u041e\u0448\u0438\u0431\u043a\u0430!"),r.a.createElement(w,{disabled:c.isSubmitting,onClick:c.handleSubmit,type:"primary",size:"medium"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))},Ze=a(590),Je=a(563),Ge=a(62),Ke=a(571),$e=a(589),qe=(a(540),Je.a.Title),Ye=Ge.a.Option,Qe={0:{text:"\u041d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",color:"red"},1:{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",color:"green"}},et=function(e){var t=r.a.useState(null),a=Object(K.a)(t,2),n=a[0],l=a[1],c=r.a.useState(!1),o=Object(K.a)(c,2),i=o[0],s=o[1];r.a.useEffect((function(){J.show(e.match.params.id).then((function(t){null===t.data.data&&e.history.push("/404"),l(t.data.data)})).catch((function(t){e.history.push("/404")}))}),[]);return null===n?r.a.createElement("div",null):r.a.createElement("div",{className:"site-content"},r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/"},"\u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement(oe.a.Item,null,null===n||void 0===n?void 0:n.name)),r.a.createElement("div",{className:"site-layout-content"},r.a.createElement(Ke.a,{title:"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"},r.a.createElement(Ke.a.Item,{label:"\u0418\u043c\u044f"},n.name),r.a.createElement(Ke.a.Item,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"},n.phone),r.a.createElement(Ke.a.Item,{label:"\u0410\u0434\u0440\u0435\u0441"},n.address||"\u041d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),r.a.createElement(Ke.a.Item,{label:"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u0430"},r.a.createElement(de.a,{style:{backgroundColor:"#52c41a"},count:n.total_sum+"\u0420",overflowCount:1e6})),r.a.createElement(Ke.a.Item,{label:"\u0414\u0430\u0442\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"},n.date_delivery),r.a.createElement(Ke.a.Item,{label:"\u0421\u0442\u0430\u0442\u0443\u0441"},!1===i&&r.a.createElement("div",{className:"cursor-pointer",onClick:function(){return s(!0)}},r.a.createElement(de.a,{color:Qe[n.status].color,text:Qe[n.status].text}),r.a.createElement(_e.a,null)),!0===i&&r.a.createElement("div",null,r.a.createElement(Ge.a,{defaultValue:n.status,style:{width:"100%"},onChange:function(e){return function(e){J.setStatus(n.id,e).finally((function(t){l(Object(N.a)({},n,{status:e})),s(!1)}))}(e)}},r.a.createElement(Ye,{value:"0"},"\u041d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),r.a.createElement(Ye,{value:"1"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"))))),r.a.createElement(se.a,null),r.a.createElement("div",null,r.a.createElement(qe,{level:4},"\u0417\u0430\u043a\u0430\u0437"),r.a.createElement(ue.a,{itemLayout:"horizontal",dataSource:n.foods,renderItem:function(e){return r.a.createElement(ue.a.Item,null,r.a.createElement(ue.a.Item.Meta,{avatar:r.a.createElement(_,{url:e.image,letter:e.letter,name:e.name}),title:e.name,description:r.a.createElement("div",{className:"order"},r.a.createElement("span",null,e.pivot.comment),r.a.createElement(de.a,{style:{backgroundColor:"#52c41a"},count:e.pivot.count+" "+e.pivot.unit,overflowCount:1e6}))}))}})),r.a.createElement("div",null,r.a.createElement(se.a,null),r.a.createElement("div",null,r.a.createElement(k.a,{onClick:function(){return e.history.push("/orders/".concat(n.id,"/taxi"),{order:n})},type:"primary",shape:"circle",icon:r.a.createElement($e.a,null),size:"large",style:{backgroundColor:"#fee35d",color:"#fff"}})))))},tt=(a(548),a(94)),at=a.n(tt),nt=r.a.createContext({}),rt=function(e){var t={},a={clientId:function(e){e||(t.clientId="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430")},date_delivery:function(e){e||(t.date_delivery="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438")},time_delivery:function(e){e||(t.time_delivery="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438")}};return Object.keys(e).forEach((function(t){return a[t]&&a[t](e[t])})),t},lt=function(e){var t=e.children,a=r.a.useState([{foodID:null,count:"1",unit:"\u0428\u0422",comment:""}]),n=Object(K.a)(a,2),l=n[0],c=n[1],o=r.a.useState(0),i=Object(K.a)(o,2),s=i[0],u=i[1],m=r.a.useState(null),p=Object(K.a)(m,2),f=p[0],h=p[1],E=r.a.useState([]),v=Object(K.a)(E,2),g=v[0],y=v[1],b=r.a.useState([]),k=Object(K.a)(b,2),w=k[0],S=k[1],C=r.a.useState(!1),_=Object(K.a)(C,2),I=_[0],O=_[1],x=r.a.useState(null),j=Object(K.a)(x,2),F=j[0],T=j[1],D=r.a.useState([]),A=Object(K.a)(D,2),R=A[0],V=A[1],B=Object(d.a)({initialValues:{clientId:"",date_delivery:"",time_delivery:""},validate:rt,onSubmit:function(e){z()}});r.a.useEffect((function(){Promise.all([W.getList().then((function(e){S(e.data)})),H.getList().then((function(e){y(e.data)}))]).finally((function(e){O(!0)}))}),[]);var z=function(){V([]);var e=at.a.cloneDeep(l);1!==e.length&&c(e.splice(1,1)),console.log(F),console.log(l);var t=Object(N.a)({cart:e.filter((function(e){return null!==e.foodID})),client_id:B.values.clientId,date_delivery:[B.values.date_delivery,B.values.time_delivery].join(" "),comment:""},F,{total_sum:s});J.save(t).then((function(e){h(e.data)})).catch((function(e){e.response.data.errors.hasOwnProperty("cart")&&V(Object.values(e.response.data.errors.cart))}))};return r.a.createElement(nt.Provider,{value:{handleChange:function(e,t,a){var n=0,r=at.a.cloneDeep(l);r[t][a]=e||null,c(r),r.map((function(e){var t=at.a.find(g,(function(t){return t.id===e.foodID}));t&&(n+=t.price*parseInt(e.count)||0)})),u(n)},foods:g,clients:w,isReady:I,selectedClient:F,setSelectedClient:T,handleChangeFood:function(e,t,a){var n=0,r=at.a.cloneDeep(l);r[t][a]=e||null,c(r),r.map((function(e){var t=at.a.find(g,(function(t){return t.id===e.foodID}));t&&(n+=t.price*parseInt(e.count)||0)})),u(n)},cart:l,pushItem:function(){var e=at.a.cloneDeep(l);e.push({foodID:null,count:"1",unit:"\u0428\u0422",comment:""}),c(e)},handleSubmit:z,sum:s,formik:B,errors:R,order:f}},t)},ct=a(558),ot=a(573),it=a(569),st=Ge.a.Option,ut=Je.a.Title,mt=function(){var e=r.a.useContext(nt),t=r.a.useRef(null);return r.a.useEffect((function(e){window.ref=t}),[e.isReady]),r.a.createElement(p.a,{onSubmit:e.formik.handleSubmit,className:"order-form"},r.a.createElement(ut,{level:4},"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:"order-form__form"},r.a.createElement(p.a.Item,{validateStatus:S("clientId",e.formik.touched,e.formik.errors),help:e.formik.touched.clientId?e.formik.errors.clientId:"",hasFeedback:!0},r.a.createElement(Ge.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",optionFilterProp:"children",onChange:function(t){e.formik.setValues(Object(N.a)({},e.formik.values,{clientId:t})),e.setSelectedClient(e.clients.find((function(e){return e.id===t})))},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},e.clients.map((function(e){return r.a.createElement(st,{key:e.id,value:e.id},e.name)})))),r.a.createElement(p.a.Item,{validateStatus:S("date_delivery",e.formik.touched,e.formik.errors),help:e.formik.touched.date_delivery?e.formik.errors.date_delivery:"",hasFeedback:!0},r.a.createElement(ie.a,{style:{width:"100%"},ref:t,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",onChange:function(t,a){return e.formik.setValues(Object(N.a)({},e.formik.values,{date_delivery:a}))}})),r.a.createElement(p.a.Item,{validateStatus:S("time_delivery",e.formik.touched,e.formik.errors),help:e.formik.touched.time_delivery?e.formik.errors.time_delivery:"",hasFeedback:!0},r.a.createElement(ct.a,{style:{width:"100%"},format:"HH:mm",onChange:function(t,a){return e.formik.setValues(Object(N.a)({},e.formik.values,{time_delivery:a}))}}))),e.selectedClient&&r.a.createElement("div",null,r.a.createElement(se.a,null),r.a.createElement(ut,{level:4},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0435"),r.a.createElement("div",{className:"order-form__form"},r.a.createElement(f.a,{placeholder:"\u0418\u043c\u044f",value:e.selectedClient.name}),r.a.createElement(f.a,{placeholder:"\u041d\u043e\u043c\u0435\u0440",style:{marginTop:5},value:e.selectedClient.phone}),r.a.createElement(f.a,{placeholder:"\u0410\u0434\u0440\u0435\u0441 ",style:{marginTop:5},value:e.selectedClient.address}))),r.a.createElement("div",null,r.a.createElement(se.a,null),r.a.createElement(ut,{level:4},"\u0417\u0430\u043a\u0430\u0437"),e.errors.map((function(e){return r.a.createElement(ot.a,{message:e,type:"error",showIcon:!0})})),e.cart.map((function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(se.a,{orientation:"left"},a+1),r.a.createElement("div",{className:"order-form__form"},r.a.createElement(Ge.a,{showSearch:!0,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u043b\u044e\u0434\u043e",optionFilterProp:"children",onChange:function(t){e.handleChangeFood(t,a,"foodID")},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},e.foods.map((function(e){return r.a.createElement(st,{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",{style:{display:"flex",marginTop:5}},r.a.createElement(it.a,{placeholder:"\u041a\u043e\u043b-\u0432\u043e",value:t.count,onChange:function(t){return e.handleChangeFood(t,a,"count")},style:{width:"100%"}}),r.a.createElement(Ge.a,{defaultValue:t.unit,style:{width:"100%"},onChange:function(t){e.handleChangeFood(t,a,"unit")}},r.a.createElement(st,{value:"\u0428\u0422"},"\u0428\u0422"),r.a.createElement(st,{value:"\u041a\u0413"},"\u041a\u0413"))),r.a.createElement(f.a,{style:{marginTop:5},placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",value:t.comment,onChange:function(t){return e.handleChangeFood(t.target.value,a,"comment")}})))})),r.a.createElement(k.a,{style:{marginTop:5},onClick:e.pushItem},"+")))},dt=function(){var e=r.a.useContext(nt);return r.a.useEffect((function(e){}),[]),r.a.createElement(k.a,{onClick:e.formik.handleSubmit,type:"primary",style:{marginTop:5}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c (",e.sum,"\u0420)")},pt=function(e){var t=e.order,a=Object(i.g)();return r.a.createElement(ce.a,{status:"success",title:"\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",subTitle:"\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043f\u043e\u0434 \u043d\u043e\u043c\u0435\u0440\u043e\u043c: ".concat(t.id),extra:[r.a.createElement(k.a,{onClick:function(){return a.push("/orders/".concat(t.id))},type:"primary",key:"console"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0437\u0430\u043a\u0430\u0437\u0443")]})},ft=function(){var e=r.a.useContext(nt).order;return r.a.useEffect((function(e){}),[]),null===e?r.a.createElement(r.a.Fragment,null,r.a.createElement(mt,null),r.a.createElement(dt,null)):r.a.createElement(pt,{order:e})},ht=function(e){return r.a.createElement(lt,null,r.a.createElement("div",{className:"site-content"},r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,"\u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement("div",{className:"site-layout-content"},r.a.createElement(ft,null))))},Et=function(e){var t=r.a.useState({address:""}),a=Object(K.a)(t,2),n=a[0],l=a[1],c=r.a.useState({address:e.location.state.order.address}),o=Object(K.a)(c,2),i=o[0],s=o[1],u=r.a.useState("+7(___)___-____"),m=Object(K.a)(u,2),d=m[0],E=m[1],v=r.a.useState(null),g=Object(K.a)(v,2),y=g[0],b=g[1],w=r.a.useState("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430: ".concat(e.location.state.order.phone,"\n\u0418\u043c\u044f: ").concat(e.location.state.order.name,"\n        ")),S=Object(K.a)(w,2),C=S[0],_=S[1],I=r.a.useCallback((function(){document.querySelector("#phone").addEventListener("input",x,!1)}));r.a.useEffect((function(){var e=localStorage.getItem("phone");e&&E(e);var t=localStorage.getItem("from");if(t){var a=JSON.parse(t);""===n.address&&l(a)}O(),I()}),[n,i]);var O=function(){if(!0!==(null===n||null===i)){var e=new FormData;e.append("source_lat",n.lat),e.append("source_lon",n.lon),e.append("destination_lat",i.lat),e.append("destination_lon",i.lon),e.append("source_time_iso8601",(new Date).toISOString()),T.a.defaults.withCredentials=!1,T.a.post("https://websites.platform.taximaster.ru/v2/calc_order_cost",e,{headers:{"Sec-Fetch-Dest":"empty","Sec-Fetch-Mod":"cors","Sec-Fetch-Site":"same-origin","X-Site-VtmId":"134","X-Site-VtmGroupId":"56",Accept:"*/*"}}).then((function(e){b(e.data)}))}};function x(e){var t=this.defaultValue,a=0,n=t.replace(/\D/g,""),r=this.value.replace(/\D/g,"");n.length>=r.length&&(r=n),t=t.replace(/[_\d]/g,(function(e){return r.charAt(a++)||"_"})),this.value=t,E(t),(a=t.lastIndexOf(r.substr(-1)))<t.length&&t!=this.defaultValue?a++:a=t.indexOf("_"),function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var a=t.createTextRange();a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",e),a.select()}}(a,this)}var j=function(e,t){return e===t},N=function(e){Ne.a[e]({message:"\u0422\u0430\u043a\u0441\u0438",description:"\u0422\u0430\u043a\u0441\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u043d\u043e"})};return r.a.createElement("div",{className:"site-content"},r.a.createElement(oe.a,{style:{margin:"16px 0"}},r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/"},"\u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement(oe.a.Item,null,r.a.createElement(h.b,{to:"/orders/".concat(e.location.state.order.id)},e.location.state.order.name)),r.a.createElement(oe.a.Item,null,"\u0422\u0430\u043a\u0441\u0438")),r.a.createElement("div",{className:"site-layout-content"},r.a.createElement(q,{callback:function(e){if(!1===j(e.address,n.address||"")){var t=JSON.stringify(e);localStorage.setItem("from",t),l(e),console.log(e)}},item:n}),r.a.createElement(q,{callback:function(e){!1===j(e.address,i.address||"")&&s(e)},item:i}),r.a.createElement(p.a.Item,null,r.a.createElement(f.a,{placeholder:"\u0418\u043c\u044f"})),r.a.createElement(p.a.Item,null,r.a.createElement(f.a,{id:"phone",value:d,placeholder:"\u0412\u0430\u0448 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 +7(___)---_--_--"}),r.a.createElement("a",{href:"/#",onClick:function(e){e.preventDefault(),E("+7(___)___-____")}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c")),r.a.createElement(p.a.Item,null,r.a.createElement(f.a.TextArea,{value:C,onChange:function(e){return _(e.target.value)},placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0434\u043b\u044f \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"})),r.a.createElement(k.a,{onClick:function(){var t=new FormData;t.append("test_field1",n.address),t.append("source_lat",n.lat),t.append("source_lon",n.lon),t.append("test_field2",i.address),t.append("destination_lat",i.lat),t.append("destination_lon",i.lon),t.append("source_time_iso8601",(new Date).toISOString()),t.append("phone",d),t.append("test_field3",""),t.append("comment",C),t.append("address_source",n.address),t.append("address_destination",i.address),t.append("name",e.location.state.order.name),t.append("auth_token","AB890D4D-EB06-4DF9-9EDC-5493A9892FB1"),T.a.post("https://websites.platform.taximaster.ru/v2/order",t,{headers:{"Sec-Fetch-Dest":"empty","Sec-Fetch-Mod":"cors","Sec-Fetch-Site":"same-origin","X-Site-VtmId":"134","X-Site-VtmGroupId":"56",Accept:"*/*"}}).then((function(t){N("success"),localStorage.setItem("phone",d),J.setStatus(e.location.state.order.id,1),e.history.push("/orders/".concat(e.location.state.order.id))})).catch((function(e){e.response&&Object.values(e.response.data.errors).map((function(e){Object.values(e).map((function(e){alert(e.join("\n"))}))}))}))}},"\u0412\u044b\u0437\u0432\u0430\u0442\u044c (\u041f\u0440\u0438\u043c\u0435\u0440\u043d\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",y,")")))},vt=re.a.Content,gt=re.a.Footer,yt=re.a.Sider,bt=function(e){var t=r.a.useState(!1),a=Object(K.a)(t,2),n=a[0],l=a[1],c=Object(i.g)();return r.a.createElement(re.a,{className:"layout",style:{minHeight:"100vh"}},r.a.createElement(yt,{className:"sider",collapsible:!0,collapsed:n,onCollapse:function(){return l(!n)}},r.a.createElement("div",{className:"logo"}),r.a.createElement(le.a,{theme:"dark",defaultSelectedKeys:["/"===window.location.pathname?"1":window.location.pathname.includes("clients")?"2":window.location.pathname.includes("foods")?"3":window.location.pathname.includes("statistics")?"4":void 0],mode:"inline"},r.a.createElement(le.a.Item,{key:"1",onClick:function(){return c.push("/")}},r.a.createElement(Ze.a,null),r.a.createElement("span",null,"\u0417\u0430\u043a\u0430\u0437\u044b")),r.a.createElement(le.a.Item,{key:"2",onClick:function(){return c.push("/clients")}},r.a.createElement(O.a,null),r.a.createElement("span",null,"\u041a\u043b\u0438\u0435\u043d\u0442\u044b")),r.a.createElement(le.a.Item,{key:"3",onClick:function(){return c.push("/foods")}},r.a.createElement(x.a,null),r.a.createElement("span",null,"\u0410\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442")),r.a.createElement(le.a.Item,{key:"4",onClick:function(){return c.push("/statistics")}},r.a.createElement(I.a,null),r.a.createElement("span",null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")),r.a.createElement(le.a.Item,{key:"5",onClick:function(){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0441\u0430\u0439\u0442 ?")&&B()}},r.a.createElement(j.a,null),r.a.createElement("span",null,"\u0412\u044b\u0439\u0442\u0438")))),r.a.createElement(re.a,null,r.a.createElement(vt,{style:{padding:"0 50px"}},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:Ee}),r.a.createElement(i.b,{exact:!0,path:"/orders/create",component:ht}),r.a.createElement(i.b,{exact:!0,path:"/orders/:id(\\d+)",component:et}),r.a.createElement(i.b,{exact:!0,path:"/orders/:id(\\d+)/taxi",component:Et}),r.a.createElement(i.b,{exact:!0,path:"/statistics",component:ye}),r.a.createElement(i.b,{exact:!0,path:"/clients",component:ke}),r.a.createElement(i.b,{exact:!0,path:"/clients/create",component:Ae}),r.a.createElement(i.b,{exact:!0,path:"/clients/:id(\\d+)",component:je}),r.a.createElement(i.b,{exact:!0,path:"/clients/:id/edit",component:Ae}),r.a.createElement(i.b,{exact:!0,path:"/clients/:id/edit",component:Ae}),r.a.createElement(i.b,{exact:!0,path:"/foods",component:Ve}),r.a.createElement(i.b,{exact:!0,path:"/foods/create",component:He}),r.a.createElement(i.b,{exact:!0,path:"/foods/:id(\\d+)",component:Pe}),r.a.createElement(i.b,{exact:!0,path:"/foods/:id/edit",component:He}),r.a.createElement(i.b,{component:function(){return r.a.createElement(ce.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(k.a,{onClick:function(){return c.push("/")},type:"primary"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")})}}))),/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&r.a.createElement(G,null),r.a.createElement(gt,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")))},kt=a(155);var wt=Object(kt.b)((function(e){return{user:e.userReducer.user,isReady:e.appReducer.isReady}}))((function(e){var t=e.user;return!1===e.isReady?r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")):r.a.createElement("div",{className:"wrapper"},r.a.createElement(i.d,null,r.a.createElement(Ct,{user:t,path:["/login","/signup"]},r.a.createElement(ne,null)),r.a.createElement(St,{user:t,path:"/"},r.a.createElement(bt,null))))}));function St(e){var t=e.children,a=e.user,n=Object(o.a)(e,["children","user"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){var n=e.location;return null!==a?t:r.a.createElement(i.a,{to:{pathname:"/login",state:{from:n}}})}}))}function Ct(e){var t=e.children,a=e.user,n=Object(o.a)(e,["children","user"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){var n=e.location;return null===a?t:r.a.createElement(i.a,{to:{pathname:"/",state:{from:n}}})}}))}var _t=a(78),It=a(283),Ot=a(117),xt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_t.d,jt=[It.a],Nt=Object(_t.e)(Ot.default,xt(_t.a.apply(void 0,jt))),Ft=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Tt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Dt=a(72),At=function(e){return{type:Dt.b,payload:e}},Rt={init:function(){var e=this;return function(t){V().then((function(e){t(At(e.data))})).catch((function(e){t(At(null))})).finally((function(){t(e.setAppIsready(!0))}))}},setAppIsready:function(e){return{type:Dt.a,payload:e}}};Nt.dispatch(Rt.init()),c.a.render(r.a.createElement(kt.a,{store:Nt},r.a.createElement(h.a,null,r.a.createElement(wt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ft?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Tt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Tt(t,e)}))}}()},72:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n="SET_USER",r="APP:SET_IS_READY"}},[[287,1,2]]]);
//# sourceMappingURL=main.b9d62fae.chunk.js.map